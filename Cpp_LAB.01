#include <iostream>
#include <cstring>

using namespace std;

bool symbol_check(char sym){
    switch(sym){
        case '+': return true;
        case '-': return true;
        case '(': return true;
        case '^': return true;
        case '/': return true;
        case '*': return true;
    }
    return false;
}

int priority(char sym){
    switch(sym){
        case '+': return 2;
        case '-': return 2;
        case '^': return 4;
        case '/': return 3;
        case '*': return 3;
    }
    return 0;
}

int main()
{
    char *input = new char[100];
    cin.getline(input, 100);
    char *exit = new char[strlen(input)-1]; int exitid=0;
    char *operstack = new char[strlen(input)-1]; int ostid=0;
    input[strlen(input)]='!';

    for(int i=0;i<strlen(input);){
            if(!symbol_check(input[i])){ //если число или переменная, то в выходной массив
                    exit[exitid]=input[i];
                    i++; exitid++;
            } else if(symbol_check(input[i])){ //если операция, то в импровизированный стэк
                    if(ostid>0){
                            if(priority(input[i])<=priority(operstack[ostid-1])){   //если приоритет больше или равен, то выталкиваем знак из стека в операций в массив выхода, а текущий добавляем в недо-стек
                                exit[exitid]=operstack[ostid-1];
                                operstack[ostid-1]=input[i];
                                exitid++;
                                cout<< "first"<<input[i]<<endl;
                            }else if(priority(input[i])>priority(operstack[ostid-1])){  ////если приоритет меньше, то последний знак из стека мы не трогаем, а просто добавляем как обычно текущий в недо-стек
                                operstack[ostid]=input[i];
                                ostid++;
                                cout<<"second"<<input[i]<<endl;
                            }
                    }else if(ostid==0){               //для первой операции
                            operstack[ostid]=input[i];
                            ostid++;
                            cout<<"third"<< input[i]<<endl;
                    }
             i++;
            }

    }
    cout<<input<< " | " << exit<< " | " << operstack <<endl;
    delete[] operstack;
    delete[] exit;
    delete[] input;
    return 0;
}
